@using GoldDashboard.Models
@model IEnumerable<AppUsers>
@{
    var userId = ViewBag.CurrentUserId;
    var message = ViewBag.Message;
}

@*<div class="jumbotron jumbotron-fluid row">
        <div class="container">
            <h1 class="display-4">Your Portfolio Data</h1>
            <div class="row">
                <form method="post" action="AddData">
                    <div class="col-2">
                        <label for="Deposit" class="lead" >Deposit</label>
                        <input type="text" class="form-control" name="Deposite" id="Deposit">
                    </div>
                    <div class="col-2">
                        <label for="Balance" class="lead">Balance</label>
                        <input type="text" class="form-control" name="Balance" id="Balance">
                    </div>
                    <div class="col-2">
                        <label for="dayProfit" class="lead">Day Profit</label>
                        <input type="text" class="form-control" name="PerDayProfit" id="dayProfit">
                    </div>
                    <div class="col-2">
                        <label for="weekProfit" class="lead">Week Profit</label>
                        <input type="text" class="form-control" name="PerWeekProfit" id="weekProfit">
                    </div>
                    <div class="col-2">
                        <label for="monthProfit" class="lead">Month Profit</label>
                        <input type="text" class="form-control" name="PerMonthProfit" id="monthProfit">
                    </div>
                    <div class="col-2">
                        <button type="submit" class="btn btn-outline-info">Submit</button>

                    </div>
                </form>

            </div>
        </div>
    </div>*@

<div class="row">
    <div class="col-3">
        <form method="post" action="AddData">

            <input type="hidden" name="UserId" id="UserId" value="@userId" />
            <!-- Example single danger button -->


            <div class="form-group ">
                <select class="form-select form-select-sm form-control" id="selectUser" aria-label=".form-select-sm example">
                    <option value="1">Select User</option>
                    @foreach (var item in Model)
                    {
                        <option value=@item.Id>@item.Email</option>
                    }
                </select>
            </div>

          
            <div class="form-group">
                <label for="Deposit">Deposit</label>
                <input type="text" class="form-control" id="Deposit" name="Deposite" aria-describedby="emailHelp" placeholder="">
            </div>
            <div class="form-group">
                <label for="Balance">Balance</label>
                <input type="text" class="form-control" id="Balance" name="Balance" aria-describedby="emailHelp">
            </div>
            <div class="form-group">
                <label for="perDayProfit">Per Day Profit</label>
                <input type="text" class="form-control" id="perDayProfit" name="PerDayProfit" aria-describedby="emailHelp">
            </div>
            <div class="form-group">
                <label for="perWeekProfit">Per Week Profit</label>
                <input type="text" class="form-control" id="perWeekProfit" name="PerWeekProfit" aria-describedby="emailHelp">
            </div>
            <div class="form-group">
                <label for="perMonthProfit">Per Month Profit</label>
                <input type="text" class="form-control" id="perMonthProfit" name="PerMonthProfit" aria-describedby="emailHelp">
            </div>

            <button type="button" class="btn btn-primary" onclick="sendData()" value="Submit">Submit</button>
        </form>
    </div>
</div>


@section scripts{
    <link href="~/Content/themes/base/jquery-ui.min.css" rel="stylesheet" />

    <script>
        $('#selectUser').on('change', function () {
                var userid = this.value;
            if (userid != 1) {
                $.ajax({
                    url: "/Account/getSingleUserData",
                    type: "post",
                    data: { "userId": userid },
                    success: function (data) {
                        debugger
                        $("#Deposit").val(data.Deposit);
                        $("#Balance").val(data.Balance);
                        $("#perDayProfit").val(data.PerDayProfit);
                        $("#perWeekProfit").val(data.PerWeekProfit);
                        $("#perMonthProfit").val(data.PerMonthProfit);
                    }

                });

            } else
            {
                $("#Deposit").val("");
                $("#Balance").val("");
                $("#perDayProfit").val("");
                $("#perWeekProfit").val("");
                $("#perMonthProfit").val("");

            }
            });
        function sendData() {

            debugger
            var id = $("#selectUser option:selected").val();
            
            var deposite = $("#Deposit").val();
            var balance = $("#Balance").val();
            var perdayprof = $("#perDayProfit").val();
            var perweekprof = $("#perWeekProfit").val();
            var permonthprof = $("#perMonthProfit").val();
            if (id = 1) {
                alert("Please select user");
                return;
            }
            if (jQuery.trim(deposite).length <= 0) {
                alert("Please enter deposite amount");
                return;
            }
            if (!$.isNumeric(deposite)) {
                alert("Please enter valid deposite amount");
                return;
            }
            if (jQuery.trim(balance).length <= 0) {
                alert("Please enter balance amount");
                return;
            }
            if (!$.isNumeric(balance)) {
                alert("Please enter valid balance amount");
                return;
            }
            if (jQuery.trim(perdayprof).length <= 0) {
                alert("Please enter per day profit amount");
                return;
            }
            if (!$.isNumeric(perdayprof)) {
                alert("Please enter valid per day profit amount");
                return;
            }
            if (jQuery.trim(perweekprof).length <= 0) {
                alert("Please enter per week profit amount");
                return;
            }
            if (!$.isNumeric(perweekprof)) {
                alert("Please enter valid per week profit amount");
                return;
            }
            if (jQuery.trim(permonthprof).length <= 0) {
                alert("Please enter per month profit amount");
                return;
            }
            if (!$.isNumeric(permonthprof)) {
                alert("Please enter valid per month profit amount");
                return;
            }

            var modelData =
            {
                "UserId": id,
                "Deposite": deposite,
                "Balance": balance,
                "PerDayProfit": perdayprof,
                "PerWeekProfit": perweekprof,
                "PerMonthProfit": permonthprof
            }

            $.ajax({
                url: "/Account/AddData",
                type: "post",
                data: { "model": modelData },
                success: function (data) {
                    debugger
                    if (data == "Updated") {
                        alert("Data Updated Sucessfully");
                        $("#UserId").val("");
                        $("#Deposit").val("");
                        $("#Balance").val("");
                        $("#perDayProfit").val("");
                        $("#perWeekProfit").val("");
                        $("#perMonthProfit").val("");

                    }

                }

            });


        }

    </script>
}
